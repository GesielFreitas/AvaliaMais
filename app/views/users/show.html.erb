<%= render "navbar/navbar" %>
<section id="corpo">
  <h1>Perfil</h1><br>
<section id="principal">
<table class="table" id="reload">
    <tr class="editar-name">
      <td>Nome</td>
      <td><%= @user.name %></td>
       <td ><a href="javascript: void(0);" id="show">Editar</a></td>
    </tr>
    <tr id="nome-update">
          <%= form_for(@user, remote: true,  :url => { :action => "update", params: {id: @user.id,email: @user.email, password: @user.password, login:@user.login, dateBirthday: @user.dateBirthday, genero: @user.gender}} ) do |f| %>
             <td class="form-update">Nome</td>
            <td class="form-update"><%= f.text_field :name, class: 'form-control'%></td>
            <td id="atualizar"><%= f.submit "Atualizar" %></td>

             <% end %>
      </tr>
    <tr>
      <td>Apelido</td>
      <td><%= @user.login %></td>
       <td class="no-editar">Editar</td>
    </tr>
   <tr >
    <td>E-mail</td>
     <td><%= @user.email %></td>
      <td class="no-editar">Editar</td>
    </tr>
    
    <tr >
      <td>G&ecirc;nero</td>
      <td > 
        <% if @user.gender == "m" %>
          <%="masculino"%> 
        <% else %> 
          <%="feminino"%>
        <%end%>
      </td>
       <td ><a href="javascript: void(0);" id="show-genero">Editar</a></td>
    </tr>
     <tr id="genero-update">
          <%= form_for(@user, remote: true,  :url => { :action => "update", params: {id: @user.id,email: @user.email, password: @user.password, name:@user.name, dateBirthday: @user.dateBirthday, login: @user.login}} ) do |f| %>
             <td class="form-update">Genero</td>
             <td>
             <span>
                Masculino <%= f.radio_button :gender, "m", :class => "radio"%> Feminino <%= f.radio_button :gender, "f", :class => "radio"%>
              </span>
                </td>
            <td id="atualizar"><%= f.submit "Atualizar" %></td>
            <% end %>

    
    <tr >
      <td>Data Nascimento</td>
      <td><%= @user.dateBirthday.to_s %></td>
       <td ><a href="javascript: void(0);" id="show-date">Editar</a></td>
    </tr>
    <tr id="date-update">
      <%= form_for(@user, remote: true,  :url => { :action => "update", params: {id: @user.id,email: @user.email, password: @user.password, login:@user.login, name: @user.name, genero: @user.gender}} ) do |f| %>
        <td class="form-update">Data Nascimento</td>
        <td class="form-update"><%= f.date_field :dateBirthday, class: 'form-control'%></td>
        <td id="atualizar"><%= f.submit "Atualizar" %></td>
      <% end %>
    </tr>
    <tr>
      <td>Senha</td>
      <td>*******</td>
      <td ><a href="javascript: void(0);" id="show-pass">Editar</a></td>
    </tr>
    <%= form_for(@user, remote: true,  :url => { :action => "update_password", params: {id: @user.id,email: @user.email, dateBirthday: @user.dateBirthday, login:@user.login, name: @user.name, genero: @user.gender}}) do |f| %>

      <tr id="pass-new">
             <td class="form-update">Nova Senha</td>
            <td class="form-update"><%= f.password_field :password%></td>
            <td></td>
      </tr>
      <tr id="pass-confirme">
             <td class="form-update">Confirme a senha</td>
            <td class="form-update"><%= f.password_field :password_confirmation%></td>
            <td id="atualizar"><%= f.submit "Atualizar" %></td>
      </tr>
      <% if flash[:error] -%>
          <p class="error"><%= flash[:error] %></p>
      <% end -%>
    <% end %>
    </table>
    <%= form_for(@user, :url => { :action => "destroy", params: {id: @user.id}} ) do |f| %>
      <%= f.submit "Excluir minha conta", data: { confirm: "Tem certeza que deseja excluir sua conta?" }, class: "btn btn-warning destroy-btn"%>
    <% end %>
</section>

</section>
<script>
        $("#show").click(function(){
          $("#nome-update").show();
        });

        $("#atualizar").click(function(){
           $("#nome-update").hide();
         });
        $("#show-genero").click(function(){
          $("#genero-update").show();
        }); 
        $("#show-date").click(function(){
          $("#date-update").show();
        });
        $("#show-pass").click(function(){
          $("#pass-old").show();
          $("#pass-new").show();
          $("#pass-confirme").show();
        }); 
</script>
</body>
